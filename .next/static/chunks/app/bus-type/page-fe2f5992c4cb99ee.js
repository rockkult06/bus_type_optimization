(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[494],{4863:function(){},2963:function(){},1461:function(e,t,r){Promise.resolve().then(r.bind(r,5228))},5228:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var s=r(8442),a=r(128),i=r(572),n=r(1721),l=r(626),o=r(6858),d=r(442),c=r(8914);let u=(0,d.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),m=a.forwardRef((e,t)=>{let{className:r,variant:a,...i}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,c.cn)(u({variant:a}),r),...i})});m.displayName="Alert",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h5",{ref:t,className:(0,c.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})}).displayName="AlertTitle";let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,c.cn)("text-sm [&_p]:leading-relaxed",r),...a})});f.displayName="AlertDescription";var x=r(3140),p=r(4753);function h(){let{dailyRoutes:e,busParameters:t,setOptimizationResults:r}=(0,i.useBusOptimization)(),[n,l]=a.useState(!1),o=async()=>{if(!e.length){alert("L\xfctfen \xf6nce veri y\xfckleyin.");return}l(!0);try{let s=e.map(e=>{let r=e.hourlyDemands.map(r=>{let s=Math.max(r.passengersAtoB,r.passengersBtoA),a=Math.max(r.travelTimeAtoB,r.travelTimeBtoA),i=[{capacity:t.smallBusCapacity,operatingCost:t.smallBusOperatingCost,co2Emission:t.smallBusCO2Emission},{capacity:t.mediumBusCapacity,operatingCost:t.mediumBusOperatingCost,co2Emission:t.mediumBusCO2Emission},{capacity:t.largeBusCapacity,operatingCost:t.largeBusOperatingCost,co2Emission:t.largeBusCO2Emission}].filter(e=>e.capacity>=s);if(0===i.length)throw Error("Saat ".concat(r.hour," i\xe7in yeterli kapasitede otob\xfcs bulunamadı."));let n=i.reduce((e,t)=>e.operatingCost*a<=t.operatingCost*a?e:t),l=Math.ceil(2*a/(60*t.operationalHours));return{hour:r.hour,selectedBusType:n.capacity===t.smallBusCapacity?"small":n.capacity===t.mediumBusCapacity?"medium":"large",requiredBuses:l,totalCost:n.operatingCost*a*l,co2Emission:n.co2Emission*(e.distanceAtoB+e.distanceBtoA)*l,capacityUtilization:s/n.capacity*100}}),s=r.reduce((e,t)=>e+t.totalCost,0),a=r.reduce((e,t)=>e+t.co2Emission,0),i=r.reduce((e,t)=>e+t.capacityUtilization,0)/r.length;return{routeNo:e.routeNo,routeName:e.routeName,hourlyOptimizations:r,totalDailyCost:s,totalDailyCO2:a,averageCapacityUtilization:i}});r(s)}catch(e){alert("Optimizasyon sırasında bir hata oluştu: "+e.message)}finally{l(!1)}};return(0,s.jsx)(p.z,{onClick:o,disabled:n||!e.length,className:"w-full",children:n?"Optimizasyon Yapılıyor...":"Optimizasyonu Başlat"})}function g(){let{setDailyRoutes:e}=(0,i.useBusOptimization)(),[t,r]=a.useState(null),l=async t=>{var s;let a=null===(s=t.target.files)||void 0===s?void 0:s[0];if(a)try{let t=await a.arrayBuffer(),s=x.ij(t),i=s.Sheets[s.SheetNames[0]],n=x.P6.sheet_to_json(i),l=new Map;n.forEach(e=>{let t=e["Hat No"],r=parseInt(e.Saat),s=e["Y\xf6n"],a=parseInt(e["Yolcu Sayısı"]),i=parseInt(e["Parkur S\xfcresi"]);l.has(t)||l.set(t,{routeNo:t,routeName:e["Hat Adı"]||"Hat ".concat(t),distanceAtoB:parseFloat(e["A-B Mesafe"]||"0"),distanceBtoA:parseFloat(e["B-A Mesafe"]||"0"),hourlyDemands:Array(24).fill(null).map((e,t)=>({hour:t,passengersAtoB:0,passengersBtoA:0,travelTimeAtoB:0,travelTimeBtoA:0}))});let n=l.get(t).hourlyDemands[r];"A-B"===s?(n.passengersAtoB=a,n.travelTimeAtoB=i):(n.passengersBtoA=a,n.travelTimeBtoA=i)}),e(Array.from(l.values())),r(null)}catch(e){r("Veri y\xfckleme hatası: "+e.message)}};return(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsx)(n.ll,{children:"Veri Y\xfckleme"})}),(0,s.jsx)(n.aY,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(o.I,{type:"file",accept:".xlsx,.xls",onChange:l,className:"w-full"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Excel dosyası formatı: Hat No, Hat Adı, Saat (0-23), Y\xf6n (A-B/B-A), Yolcu Sayısı, Parkur S\xfcresi (dk), A-B Mesafe, B-A Mesafe"})]}),t&&(0,s.jsx)(m,{variant:"destructive",children:(0,s.jsx)(f,{children:t})}),(0,s.jsx)(h,{})]})})]})}function j(){let{optimizationResults:e}=(0,i.useBusOptimization)();return e?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsx)(n.ll,{children:"Toplam G\xfcnl\xfck Maliyet"})}),(0,s.jsx)(n.aY,{children:(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[e.reduce((e,t)=>e+t.totalDailyCost,0).toFixed(2)," TL"]})})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsx)(n.ll,{children:"Toplam CO2 Emisyonu"})}),(0,s.jsx)(n.aY,{children:(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[e.reduce((e,t)=>e+t.totalDailyCO2,0).toFixed(2)," kg"]})})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsx)(n.ll,{children:"Ortalama Kapasite Kullanımı"})}),(0,s.jsx)(n.aY,{children:(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[(e.reduce((e,t)=>e+t.averageCapacityUtilization,0)/e.length).toFixed(1),"%"]})})]})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsx)(n.ll,{children:"Hat \xd6zeti"})}),(0,s.jsx)(n.aY,{children:(0,s.jsxs)(l.iA,{children:[(0,s.jsx)(l.xD,{children:(0,s.jsxs)(l.SC,{children:[(0,s.jsx)(l.ss,{children:"Hat No"}),(0,s.jsx)(l.ss,{children:"Hat Adı"}),(0,s.jsx)(l.ss,{children:"G\xfcnl\xfck Maliyet"}),(0,s.jsx)(l.ss,{children:"CO2 Emisyonu"}),(0,s.jsx)(l.ss,{children:"Kapasite Kullanımı"})]})}),(0,s.jsx)(l.RM,{children:e.map(e=>(0,s.jsxs)(l.SC,{children:[(0,s.jsx)(l.pj,{children:e.routeNo}),(0,s.jsx)(l.pj,{children:e.routeName}),(0,s.jsxs)(l.pj,{children:[e.totalDailyCost.toFixed(2)," TL"]}),(0,s.jsxs)(l.pj,{children:[e.totalDailyCO2.toFixed(2)," kg"]}),(0,s.jsxs)(l.pj,{children:[e.averageCapacityUtilization.toFixed(1),"%"]})]},e.routeNo))})]})})]}),e.map(e=>(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsxs)(n.ll,{children:["Hat ",e.routeNo," - ",e.routeName," Saatlik Detaylar"]})}),(0,s.jsx)(n.aY,{children:(0,s.jsxs)(l.iA,{children:[(0,s.jsx)(l.xD,{children:(0,s.jsxs)(l.SC,{children:[(0,s.jsx)(l.ss,{children:"Saat"}),(0,s.jsx)(l.ss,{children:"Otob\xfcs Tipi"}),(0,s.jsx)(l.ss,{children:"Gerekli Otob\xfcs"}),(0,s.jsx)(l.ss,{children:"Saatlik Maliyet"}),(0,s.jsx)(l.ss,{children:"CO2 Emisyonu"}),(0,s.jsx)(l.ss,{children:"Kapasite Kullanımı"})]})}),(0,s.jsx)(l.RM,{children:e.hourlyOptimizations.map(e=>(0,s.jsxs)(l.SC,{children:[(0,s.jsxs)(l.pj,{children:[e.hour,":00"]}),(0,s.jsx)(l.pj,{children:e.selectedBusType}),(0,s.jsx)(l.pj,{children:e.requiredBuses}),(0,s.jsxs)(l.pj,{children:[e.totalCost.toFixed(2)," TL"]}),(0,s.jsxs)(l.pj,{children:[e.co2Emission.toFixed(2)," kg"]}),(0,s.jsxs)(l.pj,{children:[e.capacityUtilization.toFixed(1),"%"]})]},e.hour))})]})})]},e.routeNo))]}):(0,s.jsx)(g,{})}function v(){return(0,s.jsx)(i.BusOptimizationProvider,{children:(0,s.jsxs)("div",{className:"container mx-auto py-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Otob\xfcs Tipi Optimizasyonu"}),(0,s.jsx)(j,{})]})})}},4753:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var s=r(8442),a=r(128),i=r(4160),n=r(442),l=r(8914);let o=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:d=!1,...c}=e,u=d?i.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:a,size:n,className:r})),ref:t,...c})});d.displayName="Button"},1721:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return n},aY:function(){return c},ll:function(){return o}});var s=r(8442),a=r(128),i=r(8914);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});n.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},6858:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var s=r(8442),a=r(128),i=r(8914);let n=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"},626:function(e,t,r){"use strict";r.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return n},pj:function(){return u},ss:function(){return c},xD:function(){return l}});var s=r(8442),a=r(128),i=r(8914);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",r),...a})})});n.displayName="Table";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",r),...a})});l.displayName="TableHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",r),...a})});o.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});d.displayName="TableRow";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});c.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"},572:function(e,t,r){"use strict";r.r(t),r.d(t,{BusOptimizationProvider:function(){return d},useBusOptimization:function(){return o}});var s=r(8442),a=r(128);let i={smallBusCapacity:25,smallBusOperatingCost:.8,smallBusCO2Emission:.7,mediumBusCapacity:90,mediumBusOperatingCost:1,mediumBusCO2Emission:1,largeBusCapacity:150,largeBusOperatingCost:1.3,largeBusCO2Emission:1.4,operationalHours:18},n={timeRange:{start:"06:00",end:"23:00"}},l=(0,a.createContext)(void 0);function o(){let e=(0,a.useContext)(l);if(!e)throw Error("useBusOptimization must be used within a BusOptimizationProvider");return e}function d(e){let{children:t}=e,[r,o]=(0,a.useState)([]),[d,c]=(0,a.useState)([]),[u,m]=(0,a.useState)(i),[f,x]=(0,a.useState)([]),[p,h]=(0,a.useState)(n),[g,j]=(0,a.useState)(null),[v,y]=(0,a.useState)(null),[b,N]=(0,a.useState)(!1),[C,B]=(0,a.useState)("busType");return(0,s.jsx)(l.Provider,{value:{routes:r,dailyRoutes:d,busParameters:u,optimizationResults:f,scheduleParameters:p,scheduleResults:g,kpis:v,setRoutes:o,setDailyRoutes:c,setBusParameters:m,setOptimizationResults:x,setScheduleParameters:h,setScheduleResults:j,setKpis:y,isOptimizing:b,setIsOptimizing:N,activeStep:C,setActiveStep:B},children:t})}},8914:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var s=r(734),a=r(1657);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}},442:function(e,t,r){"use strict";r.d(t,{j:function(){return n}});var s=r(734);let a=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,i=s.W,n=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return i(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:n,defaultVariants:l}=t,o=Object.keys(n).map(e=>{let t=null==r?void 0:r[e],s=null==l?void 0:l[e];if(null===t)return null;let i=a(t)||a(s);return n[e][i]}),d=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return i(e,o,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:r,className:s,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...d}[t]):({...l,...d})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[531,434,230,481,744],function(){return e(e.s=1461)}),_N_E=e.O()}]);