(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[199],{4863:function(){},2963:function(){},1534:function(e,t,s){"use strict";s.d(t,{Z:function(){return el}});var a=s(8442),r=s(128),l=s(4753);s(7025),s(1568),s(841);var i=s(1798),o=s(803),n=s(7408),d=s(6787),c=s(4867),u=s(5932),m=s(6378),x=s(7314),h=s(8981),b=s(8276),g=s(9201),p=s(863),f=s(2886),y=s(572),j=s(3140),N=s(23),v=s(440),k=s(626),w=s(9876),B=s(8914);let A=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(w.fC,{ref:t,className:(0,B.cn)("relative flex w-full touch-none select-none items-center",s),...r,children:[(0,a.jsx)(w.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(w.e6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(w.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});A.displayName=w.fC.displayName;var T=s(6858),C=s(3196),S=s(7231),L=s(1756),z=s(1796),_=s(6822),E=s(6430),F=s(4550),O=s(2379),R=s(4386),Z=s(4904),M=s(6078);let D=O.fC,I=O.xz;O.ZA,O.Uv,O.Tr,O.Ee,r.forwardRef((e,t)=>{let{className:s,inset:r,children:l,...i}=e;return(0,a.jsxs)(O.fF,{ref:t,className:(0,B.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...i,children:[l,(0,a.jsx)(R.Z,{className:"ml-auto"})]})}).displayName=O.fF.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(O.tu,{ref:t,className:(0,B.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=O.tu.displayName;let P=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...l}=e;return(0,a.jsx)(O.Uv,{children:(0,a.jsx)(O.VY,{ref:t,sideOffset:r,className:(0,B.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})})});P.displayName=O.VY.displayName;let U=r.forwardRef((e,t)=>{let{className:s,inset:r,...l}=e;return(0,a.jsx)(O.ck,{ref:t,className:(0,B.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...l})});U.displayName=O.ck.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,checked:l,...i}=e;return(0,a.jsxs)(O.oC,{ref:t,className:(0,B.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:l,...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(O.wU,{children:(0,a.jsx)(Z.Z,{className:"h-4 w-4"})})}),r]})}).displayName=O.oC.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(O.Rk,{ref:t,className:(0,B.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(O.wU,{children:(0,a.jsx)(M.Z,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=O.Rk.displayName,r.forwardRef((e,t)=>{let{className:s,inset:r,...l}=e;return(0,a.jsx)(O.__,{ref:t,className:(0,B.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...l})}).displayName=O.__.displayName;let H=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(O.Z0,{ref:t,className:(0,B.cn)("-mx-1 my-1 h-px bg-muted",s),...r})});H.displayName=O.Z0.displayName;var Y=s(4162);let K=e=>{let{routeNo:t,startTime:s,endTime:r,direction:l,duration:i,color:o,routeName:n,style:d,routeLength:c=0,busId:u}=e,m="linear-gradient(to right, ".concat(o,"cc, ").concat(o,"cc)"),x="A->B"===l;return(0,a.jsx)(Y.zt,{children:(0,a.jsxs)(Y.fC,{children:[(0,a.jsx)(Y.xz,{asChild:!0,children:(0,a.jsxs)("div",{className:"absolute h-10 shadow-md flex items-center justify-center text-white text-xs font-medium overflow-hidden whitespace-nowrap transition-all duration-200 hover:shadow-lg",style:{...d,background:m,boxShadow:"0px 4px 10px rgba(0,0,0,0.2), 0 0 0 1px rgba(255,255,255,0.2), 0 0 8px rgba(255,255,255,0.2)",clipPath:x?"polygon(0% 0%, 97% 0%, 100% 50%, 97% 100%, 0% 100%, 3% 50%)":"polygon(3% 0%, 100% 0%, 100% 100%, 3% 100%, 0% 50%)",borderRadius:"12px",textOverflow:"ellipsis",minWidth:"40px",transition:"all 0.5s ease",border:"1.5px solid rgba(255,255,255,0.25)"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(to right, ".concat(o,", ").concat(o,")"),e.currentTarget.style.boxShadow="0px 4px 20px rgba(0,0,0,0.3), 0 0 0 2px rgba(255,255,255,0.4), 0 0 16px rgba(255,255,255,0.3)",e.currentTarget.style.border="2px solid rgba(255,255,255,0.5)"},onMouseLeave:e=>{e.currentTarget.style.background=m,e.currentTarget.style.boxShadow="0px 4px 10px rgba(0,0,0,0.2), 0 0 0 1px rgba(255,255,255,0.2), 0 0 8px rgba(255,255,255,0.2)",e.currentTarget.style.border="1.5px solid rgba(255,255,255,0.25)"},children:[x&&(0,a.jsx)("div",{className:"absolute right-1 h-full flex items-center justify-center opacity-80",children:(0,a.jsx)("div",{className:"w-0 h-0 border-y-[6px] border-y-transparent border-l-[6px] border-l-white"})}),!x&&(0,a.jsx)("div",{className:"absolute left-1 h-full flex items-center justify-center opacity-80",children:(0,a.jsx)("div",{className:"w-0 h-0 border-y-[6px] border-y-transparent border-r-[6px] border-r-white"})}),(0,a.jsx)("span",{className:"px-3 font-medium truncate text-sm",children:t})]})}),(0,a.jsx)(Y.VY,{side:"top",className:"bg-white text-gray-800 border border-gray-200 shadow-md rounded-lg p-3 z-50 max-w-[250px]",children:(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("p",{className:"font-semibold text-sm flex items-center",children:[(0,a.jsx)("span",{className:"h-3 w-3 rounded-full mr-2",style:{backgroundColor:o}}),"Hat ",t," ",n&&"- ".concat(n)]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Y\xf6n: ","A->B"===l?"A → B (Gidiş)":"B → A (D\xf6n\xfcş)"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Kalkış Saati: ",s]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Tahmini Varış: ",r]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["S\xfcre: ",i," dakika"]}),c>0&&(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Mesafe: ",c.toFixed(1)," km"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 mt-1 pt-1 border-t border-gray-200",children:["Otob\xfcs: ",u]})]})})]})})},G=(e,t)=>{let[s,a]=e.split(":").map(Number),r=60*s+a+t;return"".concat(String(Math.floor(r/60)%24).padStart(2,"0"),":").concat(String(r%60).padStart(2,"0"))};var V=e=>{let{scheduleResults:t,routes:s=[]}=e,o=e=>{let[t,s]=e.split(":").map(Number);return 60*t+s},d=(e,t,s)=>{let a=o(e),r=o(t),l=o(s);return a>=r&&a<=l},[c,u]=r.useState(1),[m,x]=r.useState(0),[h,b]=r.useState(""),[g,p]=r.useState(""),[f,y]=r.useState("all"),[j,N]=r.useState({start:"05:00",end:"23:00"}),[v,k]=r.useState(!1),w=r.useMemo(()=>{if(!t||!t.busUtilization)return[];let e=Object.keys(t.busUtilization).map(e=>{let s=t.busUtilization[e].busType;return{id:e,typeLabel:"minibus"===s?"M":"solo"===s?"S":"K"}});return g?e.filter(e=>e.id.toLowerCase().includes(g.toLowerCase())):e.sort((e,t)=>e.id.localeCompare(t.id))},[t,g]),B=r.useMemo(()=>{let e={};return t&&(t.scheduleAB&&("all"===f||"ab"===f)&&t.scheduleAB.forEach(t=>{if(!t.busId||h&&t.routeNo!==h||!d(t.time,j.start,j.end))return;e[t.busId]||(e[t.busId]=[]);let a=s&&s.length>0?s.find(e=>e.routeNo===t.routeNo):void 0,r=(null==a?void 0:a.travelTimeAtoB)||30,l=(null==a?void 0:a.routeLengthAtoB)||0;e[t.busId].push({startTime:t.time,endTime:G(t.time,r),duration:r,direction:"A->B",routeNo:t.routeNo||"Unknown",routeName:(null==a?void 0:a.routeName)||"",routeLength:l,busId:t.busId})}),t.scheduleBA&&("all"===f||"ba"===f)&&t.scheduleBA.forEach(t=>{if(!t.busId||h&&t.routeNo!==h||!d(t.time,j.start,j.end))return;e[t.busId]||(e[t.busId]=[]);let a=s&&s.length>0?s.find(e=>e.routeNo===t.routeNo):void 0,r=(null==a?void 0:a.travelTimeBtoA)||30,l=(null==a?void 0:a.routeLengthBtoA)||0,i=G(t.time,r);e[t.busId].push({startTime:t.time,endTime:i,duration:r,direction:"B->A",routeNo:t.routeNo||"Unknown",routeName:(null==a?void 0:a.routeName)||"",routeLength:l,busId:t.busId})})),e},[t,s,h,f,j,d]),O=r.useMemo(()=>{let e={},s=new Set;(null==t?void 0:t.scheduleAB)&&t.scheduleAB.forEach(e=>{e.routeNo&&s.add(e.routeNo)}),(null==t?void 0:t.scheduleBA)&&t.scheduleBA.forEach(e=>{e.routeNo&&s.add(e.routeNo)});let a=["#93c5fd","#86efac","#fdba74","#c4b5fd","#f9a8d4","#fda4af","#a5f3fc","#fcd34d","#a5b4fc","#5eead4","#d8b4fe","#bef264"];return[...s].forEach((t,s)=>{e[t]=a[s%a.length]}),e},[t]),R=r.useMemo(()=>{let e=new Set;return(null==t?void 0:t.scheduleAB)&&t.scheduleAB.forEach(t=>{t.routeNo&&e.add(t.routeNo)}),(null==t?void 0:t.scheduleBA)&&t.scheduleBA.forEach(t=>{t.routeNo&&e.add(t.routeNo)}),Array.from(e).sort()},[t]),Z=r.useMemo(()=>{let e=c<=1?60:c<=2?30:c<=3?15:10,t=[];for(let s=0;s<60/e*21;s++){let a=300+s*e,r=Math.floor(a/60)%24,l=a%60,i="".concat(r.toString().padStart(2,"0"),":").concat(l.toString().padStart(2,"0"));t.push(i)}return t},[c]);if(!t||0===w.length)return(0,a.jsx)("div",{className:"rounded-lg bg-gray-100 dark:bg-gray-800 p-8 text-center text-muted-foreground",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(n.Z,{className:"h-10 w-10 mb-3 text-gray-400 dark:text-gray-600"}),(0,a.jsx)("p",{className:"text-base",children:"G\xf6rselleştirilecek \xe7izelge verisi bulunamadı."}),(0,a.jsx)("p",{className:"text-sm mt-1 text-gray-500 dark:text-gray-400",children:"\xd6nce sefer \xe7izelgesi optimizasyonu \xe7alıştırılmalıdır."})]})});let M=(e,t)=>{let[s,a]=e.split(":").map(Number);return{startPosition:(60*s+a-300)/1260*100,width:t/1260*100}},V=e=>{u(e)};return(0,a.jsx)(Y.zt,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(l.z,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>k(!v),children:[(0,a.jsx)(S.Z,{className:"h-3 w-3 mr-1"}),v?"Filtreleri Gizle":"Filtreleri G\xf6ster"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.z,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>V(Math.max(.5,c-.5)),disabled:c<=.5,children:(0,a.jsx)(L.Z,{className:"h-4 w-4"})}),(0,a.jsx)(A,{value:[c],min:.5,max:4,step:.5,className:"w-24",onValueChange:e=>V(e[0])}),(0,a.jsx)(l.z,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>V(Math.min(4,c+.5)),disabled:c>=4,children:(0,a.jsx)(z.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.z,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>{b(""),p(""),y("all"),N({start:"05:00",end:"23:00"}),u(1)},children:[(0,a.jsx)(_.Z,{className:"h-3 w-3 mr-1"}),"Sıfırla"]}),(0,a.jsxs)(l.z,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>{let e=document.getElementById("schedule-timeline-container");e&&(e.scrollLeft=0)},children:[(0,a.jsx)(i.Z,{className:"h-3 w-3 mr-1"}),"Başa D\xf6n"]})]})]}),v&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg mb-4 animate-fadeIn",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{htmlFor:"route-filter",className:"text-xs font-medium mb-1.5 block",children:"Hat Numarası"}),(0,a.jsxs)(D,{children:[(0,a.jsx)(I,{asChild:!0,children:(0,a.jsxs)(l.z,{variant:"outline",className:"w-full justify-between",children:[h||"T\xfcm Hatlar",(0,a.jsx)(E.Z,{className:"h-4 w-4 ml-2 opacity-50"})]})}),(0,a.jsxs)(P,{className:"w-48",children:[(0,a.jsx)(U,{onClick:()=>b(""),children:"T\xfcm Hatlar"}),(0,a.jsx)(H,{}),R.map(e=>(0,a.jsxs)(U,{onClick:()=>b(e),children:["Hat ",e]},e))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{htmlFor:"bus-filter",className:"text-xs font-medium mb-1.5 block",children:"Otob\xfcs ID"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(F.Z,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-400"}),(0,a.jsx)(T.I,{id:"bus-filter",value:g,onChange:e=>p(e.target.value),placeholder:"Otob\xfcs ara...",className:"pl-9"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{htmlFor:"direction-filter",className:"text-xs font-medium mb-1.5 block",children:"Y\xf6n"}),(0,a.jsxs)(D,{children:[(0,a.jsx)(I,{asChild:!0,children:(0,a.jsxs)(l.z,{variant:"outline",className:"w-full justify-between",children:["all"===f?"T\xfcm Y\xf6nler":"ab"===f?"A → B (Gidiş)":"B → A (D\xf6n\xfcş)",(0,a.jsx)(E.Z,{className:"h-4 w-4 ml-2 opacity-50"})]})}),(0,a.jsxs)(P,{children:[(0,a.jsx)(U,{onClick:()=>y("all"),children:"T\xfcm Y\xf6nler"}),(0,a.jsx)(U,{onClick:()=>y("ab"),children:"A → B (Gidiş)"}),(0,a.jsx)(U,{onClick:()=>y("ba"),children:"B → A (D\xf6n\xfcş)"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{className:"text-xs font-medium mb-1.5 block",children:"Zaman Aralığı"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(T.I,{type:"time",value:j.start,onChange:e=>N({...j,start:e.target.value}),className:"w-full"}),(0,a.jsx)("span",{className:"text-gray-500",children:"-"}),(0,a.jsx)(T.I,{type:"time",value:j.end,onChange:e=>N({...j,end:e.target.value}),className:"w-full"})]})]})]}),(0,a.jsx)("div",{id:"schedule-timeline-container",className:"w-full overflow-x-auto",children:(0,a.jsxs)("div",{className:"min-w-[1000px] relative bg-gray-800 rounded-xl text-white overflow-hidden border border-gray-700 shadow-xl",style:{width:"".concat(100*Math.max(1,c),"%"),transformOrigin:"left center",position:"relative"},children:[(0,a.jsxs)("div",{className:"flex border-b border-gray-700 sticky top-0 z-20 bg-gray-800",children:[(0,a.jsx)("div",{className:"w-20 min-w-20 flex items-center justify-center p-2 font-medium text-sm border-r border-gray-700 sticky left-0 z-50 bg-gray-800 shadow-md",children:"ID - Tip"}),(0,a.jsx)("div",{className:"flex-1 flex",children:Z.map((e,t)=>(0,a.jsx)("div",{className:"flex-1 text-center py-2 text-xs text-gray-300 border-r border-gray-700/50 last:border-r-0",children:e},t))})]}),(0,a.jsxs)("div",{className:"relative max-h-[560px] overflow-y-auto",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex pointer-events-none",children:Z.map((e,t)=>(0,a.jsx)("div",{className:"flex-1 border-r border-gray-600/40 last:border-r-0 h-full"},t))}),w.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"flex h-14 relative hover:bg-gray-700/30 transition-colors ".concat(t<w.length-1?"border-b border-gray-700/50":""),children:[(0,a.jsx)("div",{className:"w-20 min-w-20 flex items-center justify-center p-2 font-medium text-sm border-r border-gray-700 sticky left-0 z-40 bg-gray-800 shadow-md",children:(0,a.jsxs)("div",{className:"px-2 py-1.5 rounded-full bg-gray-700/70 flex items-center border border-gray-600",children:[(0,a.jsx)("span",{children:e.id.split("-")[1]}),(0,a.jsx)("span",{className:"ml-1.5 text-xs px-1.5 py-0.5 rounded-full bg-gray-600/70 border border-gray-500",children:e.typeLabel})]})}),(0,a.jsx)("div",{className:"flex-1 relative",children:null===(s=B[e.id])||void 0===s?void 0:s.map((t,s)=>{let{startPosition:r,width:l}=M(t.startTime,t.duration);return(0,a.jsx)(K,{routeNo:t.routeNo,startTime:t.startTime,endTime:t.endTime,direction:t.direction,duration:t.duration,color:O[t.routeNo]||"#374151",routeName:t.routeName,routeLength:t.routeLength,style:{left:"".concat(r,"%"),width:"".concat(Math.max(l,3),"%"),top:"8px"},busId:t.busId},"".concat(e.id,"-").concat(s))})})]},e.id)})]})]})}),(0,a.jsx)(e=>{let{routeColors:t,routes:s=[]}=e;return(0,a.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:Object.entries(t).map(e=>{let[t,r]=e,l=s&&s.length>0?s.find(e=>e.routeNo===t):void 0;return(0,a.jsxs)("div",{className:"flex items-center rounded-md px-2 py-1 text-xs text-white shadow-sm",style:{backgroundColor:r},children:[(0,a.jsxs)("span",{className:"font-medium",children:["Hat ",t]}),(null==l?void 0:l.routeName)&&(0,a.jsxs)("span",{className:"ml-1 opacity-80 hidden md:inline",children:["- ",l.routeName]})]},t)})})},{routeColors:O,routes:s})]})})};let J=e=>{let{busId:t,busType:s,startTime:r,endTime:l,color:i,style:o,routeNo:n,routeName:d,direction:c,routeLength:u=0}=e;return(0,a.jsx)(N.pn,{children:(0,a.jsxs)(N.u,{children:[(0,a.jsx)(N.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"absolute h-8 shadow-md flex items-center justify-center text-white text-xs font-medium overflow-hidden whitespace-nowrap transition-all duration-200 hover:shadow-lg rounded-md",style:{...o,background:i,boxShadow:"0px 2px 6px rgba(0,0,0,0.15)",transition:"all 0.2s ease",border:"2px solid",borderColor:"minibus"===s?"#134e4a":"solo"===s?"#1e3a8a":"#831843"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="0px 4px 12px rgba(0,0,0,0.2)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0px 2px 6px rgba(0,0,0,0.15)"},children:(0,a.jsx)("span",{className:"px-2 font-medium truncate",children:t.split("-")[1]})})}),(0,a.jsx)(N._v,{side:"top",className:"bg-white text-gray-800 border border-gray-200 shadow-md rounded-lg p-3 z-50 max-w-[250px]",children:(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("p",{className:"font-semibold text-sm flex items-center",children:[(0,a.jsx)("span",{className:"h-3 w-3 rounded-full mr-2",style:{backgroundColor:i}}),"Hat ",n," ",d&&"- ".concat(d)]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Y\xf6n: ","A->B"===c?"A → B (Gidiş)":"B → A (D\xf6n\xfcş)"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Kalkış Saati: ",r]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Tahmini Varış: ",l]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Otob\xfcs: ",t]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Tip: ","minibus"===s?"Midib\xfcs":"solo"===s?"Solo":"K\xf6r\xfckl\xfc"]}),u>0&&(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Mesafe: ",u.toFixed(1)," km"]})]})})]})})},Q=(e,t)=>{let[s,a]=e.split(":").map(Number),r=60*s+a+t;return"".concat(String(Math.floor(r/60)%24).padStart(2,"0"),":").concat(String(r%60).padStart(2,"0"))};var W=e=>{let{scheduleResults:t,routes:s=[]}=e,[o,n]=(0,r.useState)(1),[d,c]=(0,r.useState)(""),[u,x]=(0,r.useState)("all"),[h,b]=(0,r.useState)({start:"05:00",end:"23:00"}),[g,p]=(0,r.useState)(!1),f=e=>{let[t,s]=e.split(":").map(Number);return 60*t+s},y=(e,t,s)=>{let a=f(e),r=f(t),l=f(s);return a>=r&&a<=l},j=(0,r.useMemo)(()=>{let e=new Set;return(null==t?void 0:t.scheduleAB)&&t.scheduleAB.forEach(t=>{t.routeNo&&e.add(t.routeNo)}),(null==t?void 0:t.scheduleBA)&&t.scheduleBA.forEach(t=>{t.routeNo&&e.add(t.routeNo)}),Array.from(e).sort()},[t]),N=(0,r.useMemo)(()=>{let e={},s={minibus:"#2dd4bf",solo:"#60a5fa",articulated:"#f472b6"};return(null==t?void 0:t.scheduleAB)&&t.scheduleAB.forEach(t=>{if(t.busId){let a=t.busType||"solo";e[t.busId]=s["k\xf6r\xfckl\xfc"===a?"articulated":a]}}),(null==t?void 0:t.scheduleBA)&&t.scheduleBA.forEach(t=>{if(t.busId){let a=t.busType||"solo";e[t.busId]=s["k\xf6r\xfckl\xfc"===a?"articulated":a]}}),e},[t]),v=(0,r.useMemo)(()=>{let e=o<=1?60:o<=2?30:15,t=[];for(let s=5;s<=23;s++)for(let a=0;a<60&&(23!==s||!(a>0));a+=e){let e="".concat(s.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"));t.push(e)}return t},[o]),k=(0,r.useMemo)(()=>{if(!t)return[];let e=[];return j.forEach(a=>{if(!d||a===d){if("all"===u||"ab"===u){let r=t.scheduleAB.filter(e=>e.routeNo===a&&y(e.time,h.start,h.end));r.length>0&&e.push({routeNo:a,direction:"A->B",trips:r.map(e=>{let t=s.find(e=>e.routeNo===a),r=(null==t?void 0:t.travelTimeAtoB)||30;return{...e,endTime:Q(e.time,r),duration:r,routeLength:(null==t?void 0:t.routeLengthAtoB)||0,routeName:(null==t?void 0:t.routeName)||""}})})}if("all"===u||"ba"===u){let r=t.scheduleBA.filter(e=>e.routeNo===a&&y(e.time,h.start,h.end));r.length>0&&e.push({routeNo:a,direction:"B->A",trips:r.map(e=>{let t=s.find(e=>e.routeNo===a),r=(null==t?void 0:t.travelTimeBtoA)||30;return{...e,endTime:Q(e.time,r),duration:r,routeLength:(null==t?void 0:t.routeLengthBtoA)||0,routeName:(null==t?void 0:t.routeName)||""}})})}}}),e},[t,s,j,d,u,h]),w=e=>{let[t,s]=e.split(":").map(Number);return(60*t+s-300)/1080*100},B=e=>{n(e)};return t&&0!==Object.keys(t).length?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(l.z,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>p(!g),children:[(0,a.jsx)(S.Z,{className:"h-3 w-3 mr-1"}),g?"Filtreleri Gizle":"Filtreleri G\xf6ster"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.z,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>B(Math.max(.5,o-.5)),disabled:o<=.5,children:(0,a.jsx)(L.Z,{className:"h-4 w-4"})}),(0,a.jsx)(A,{value:[o],min:.5,max:4,step:.5,className:"w-24",onValueChange:e=>B(e[0])}),(0,a.jsx)(l.z,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>B(Math.min(4,o+.5)),disabled:o>=4,children:(0,a.jsx)(z.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.z,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>{c(""),x("all"),b({start:"05:00",end:"23:00"}),n(1)},children:[(0,a.jsx)(_.Z,{className:"h-3 w-3 mr-1"}),"Sıfırla"]}),(0,a.jsxs)(l.z,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>{let e=document.getElementById("route-schedule-timeline-container");e&&(e.scrollLeft=0)},children:[(0,a.jsx)(i.Z,{className:"h-3 w-3 mr-1"}),"Başa D\xf6n"]})]})]}),g&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg mb-4 animate-fadeIn",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{htmlFor:"route-filter",className:"text-xs font-medium mb-1.5 block",children:"Hat Numarası"}),(0,a.jsxs)(D,{children:[(0,a.jsx)(I,{asChild:!0,children:(0,a.jsxs)(l.z,{variant:"outline",className:"w-full justify-between",children:[d||"T\xfcm Hatlar",(0,a.jsx)(E.Z,{className:"h-4 w-4 ml-2 opacity-50"})]})}),(0,a.jsxs)(P,{className:"w-48",children:[(0,a.jsx)(U,{onClick:()=>c(""),children:"T\xfcm Hatlar"}),(0,a.jsx)(H,{}),j.map(e=>(0,a.jsxs)(U,{onClick:()=>c(e),children:["Hat ",e]},e))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{htmlFor:"direction-filter",className:"text-xs font-medium mb-1.5 block",children:"Y\xf6n"}),(0,a.jsxs)(D,{children:[(0,a.jsx)(I,{asChild:!0,children:(0,a.jsxs)(l.z,{variant:"outline",className:"w-full justify-between",children:["all"===u?"T\xfcm Y\xf6nler":"ab"===u?"A → B (Gidiş)":"B → A (D\xf6n\xfcş)",(0,a.jsx)(E.Z,{className:"h-4 w-4 ml-2 opacity-50"})]})}),(0,a.jsxs)(P,{children:[(0,a.jsx)(U,{onClick:()=>x("all"),children:"T\xfcm Y\xf6nler"}),(0,a.jsx)(U,{onClick:()=>x("ab"),children:"A → B (Gidiş)"}),(0,a.jsx)(U,{onClick:()=>x("ba"),children:"B → A (D\xf6n\xfcş)"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{className:"text-xs font-medium mb-1.5 block",children:"Zaman Aralığı"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(T.I,{type:"time",value:h.start,onChange:e=>b({...h,start:e.target.value}),className:"w-full"}),(0,a.jsx)("span",{className:"text-gray-500",children:"-"}),(0,a.jsx)(T.I,{type:"time",value:h.end,onChange:e=>b({...h,end:e.target.value}),className:"w-full"})]})]})]}),(0,a.jsx)("div",{id:"route-schedule-timeline-container",className:"w-full overflow-x-auto",children:(0,a.jsxs)("div",{className:"min-w-[1000px] relative bg-gray-800 rounded-xl text-white overflow-hidden border border-gray-700 shadow-xl",style:{width:"".concat(100*Math.max(1,o),"%"),transformOrigin:"left center"},children:[(0,a.jsxs)("div",{className:"flex border-b border-gray-700 sticky top-0 z-20 bg-gray-800",children:[(0,a.jsx)("div",{className:"w-40 min-w-40 flex items-center justify-center p-2 font-medium text-sm border-r border-gray-700 sticky left-0 z-50 bg-gray-800 shadow-md",children:"Hat No - Y\xf6n"}),(0,a.jsx)("div",{className:"flex-1 flex",children:v.map((e,t)=>(0,a.jsx)("div",{className:"flex-1 text-center py-2 text-xs text-gray-300 border-r border-gray-700/50 last:border-r-0",children:e},t))})]}),(0,a.jsxs)("div",{className:"relative max-h-[560px] overflow-y-auto",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex pointer-events-none",children:v.map((e,t)=>(0,a.jsx)("div",{className:"flex-1 border-r border-gray-600/40 last:border-r-0 h-full"},t))}),k.map((e,t)=>{let{routeNo:s,direction:r,trips:l}=e;return(0,a.jsxs)("div",{className:"flex h-14 relative hover:bg-gray-700/30 transition-colors ".concat(t<k.length-1?"border-b border-gray-700/50":""),children:[(0,a.jsx)("div",{className:"w-40 min-w-40 flex items-center justify-center p-2 font-medium text-sm border-r border-gray-700 sticky left-0 z-40 bg-gray-800 shadow-md",children:(0,a.jsxs)("div",{className:"px-2 py-1.5 rounded-full bg-gray-700/70 flex items-center border border-gray-600",children:[(0,a.jsxs)("span",{children:["Hat ",s]}),(0,a.jsx)("span",{className:"ml-1.5 text-xs px-1.5 py-0.5 rounded-full bg-gray-600/70 border border-gray-500",children:"A->B"===r?"A→B":"B→A"})]})}),(0,a.jsx)("div",{className:"flex-1 relative",children:l.map((e,t)=>{let l=w(e.time);return(0,a.jsx)(J,{busId:e.busId,busType:e.busType||"solo",startTime:e.time,endTime:e.endTime,color:N[e.busId],style:{left:"".concat(l,"%"),width:"40px",top:"12px"},routeNo:s,routeName:e.routeName,direction:r,routeLength:e.routeLength},"".concat(s,"-").concat(r,"-").concat(t))})})]},"".concat(s,"-").concat(r))})]})]})}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,a.jsx)("div",{className:"flex items-center rounded-md px-3 py-1.5 text-xs text-white shadow-sm border-2 border-[#134e4a]",style:{backgroundColor:"#2dd4bf"},children:(0,a.jsx)("span",{className:"font-medium",children:"Midib\xfcs"})}),(0,a.jsx)("div",{className:"flex items-center rounded-md px-3 py-1.5 text-xs text-white shadow-sm border-2 border-[#1e3a8a]",style:{backgroundColor:"#60a5fa"},children:(0,a.jsx)("span",{className:"font-medium",children:"Solo"})}),(0,a.jsx)("div",{className:"flex items-center rounded-md px-3 py-1.5 text-xs text-white shadow-sm border-2 border-[#831843]",style:{backgroundColor:"#f472b6"},children:(0,a.jsx)("span",{className:"font-medium",children:"K\xf6r\xfckl\xfc"})})]})]}):(0,a.jsx)("div",{className:"rounded-lg bg-gray-100 dark:bg-gray-800 p-8 text-center text-muted-foreground",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(m.Z,{className:"h-10 w-10 mb-3 text-gray-400 dark:text-gray-600"}),(0,a.jsx)("p",{className:"text-base",children:"G\xf6rselleştirilecek hat \xe7izelgesi verisi bulunamadı."}),(0,a.jsx)("p",{className:"text-sm mt-1 text-gray-500 dark:text-gray-400",children:"\xd6nce sefer \xe7izelgesi optimizasyonu \xe7alıştırılmalıdır."})]})})};let q=e=>e.reduce((e,t)=>e+t.peakPassengersAtoB+t.peakPassengersBtoA,0),X=(e,t)=>{let s=0;return e.scheduleAB.forEach(e=>{if(e.routeNo){let a=t.find(t=>t.routeNo===e.routeNo);if(a)s+=a.routeLengthAtoB;else{let e=t.reduce((e,t)=>e+t.routeLengthAtoB,0)/t.length;s+=e}}else{let e=t.reduce((e,t)=>e+t.routeLengthAtoB,0)/t.length;s+=e}}),e.scheduleBA.forEach(e=>{if(e.routeNo){let a=t.find(t=>t.routeNo===e.routeNo);if(a)s+=a.routeLengthBtoA;else{let e=t.reduce((e,t)=>e+t.routeLengthBtoA,0)/t.length;s+=e}}else{let e=t.reduce((e,t)=>e+t.routeLengthBtoA,0)/t.length;s+=e}}),s},$=(e,t,s)=>{let a=0;return e.scheduleAB.forEach(e=>{let r="minibus"===e.busType?s.minibus.fuelCost:"solo"===e.busType?s.solo.fuelCost:"articulated"===e.busType?s.articulated.fuelCost:0;if(e.routeNo){let s=t.find(t=>t.routeNo===e.routeNo);if(s)a+=r*s.routeLengthAtoB;else{let e=t.reduce((e,t)=>e+t.routeLengthAtoB,0)/t.length;a+=r*e}}else{let e=t.reduce((e,t)=>e+t.routeLengthAtoB,0)/t.length;a+=r*e}}),e.scheduleBA.forEach(e=>{let r="minibus"===e.busType?s.minibus.fuelCost:"solo"===e.busType?s.solo.fuelCost:"articulated"===e.busType?s.articulated.fuelCost:0;if(e.routeNo){let s=t.find(t=>t.routeNo===e.routeNo);if(s)a+=r*s.routeLengthBtoA;else{let e=t.reduce((e,t)=>e+t.routeLengthBtoA,0)/t.length;a+=r*e}}else{let e=t.reduce((e,t)=>e+t.routeLengthBtoA,0)/t.length;a+=r*e}}),a},ee=(e,t,s)=>{let a=0;return e.scheduleAB.forEach(e=>{let r="minibus"===e.busType?s.minibus.maintenanceCost:"solo"===e.busType?s.solo.maintenanceCost:"articulated"===e.busType?s.articulated.maintenanceCost:0;if(e.routeNo){let s=t.find(t=>t.routeNo===e.routeNo);if(s)a+=r*s.routeLengthAtoB;else{let e=t.reduce((e,t)=>e+t.routeLengthAtoB,0)/t.length;a+=r*e}}else{let e=t.reduce((e,t)=>e+t.routeLengthAtoB,0)/t.length;a+=r*e}}),e.scheduleBA.forEach(e=>{let r="minibus"===e.busType?s.minibus.maintenanceCost:"solo"===e.busType?s.solo.maintenanceCost:"articulated"===e.busType?s.articulated.maintenanceCost:0;if(e.routeNo){let s=t.find(t=>t.routeNo===e.routeNo);if(s)a+=r*s.routeLengthBtoA;else{let e=t.reduce((e,t)=>e+t.routeLengthBtoA,0)/t.length;a+=r*e}}else{let e=t.reduce((e,t)=>e+t.routeLengthBtoA,0)/t.length;a+=r*e}}),a},et=(e,t,s)=>{let a=0;return e.scheduleAB.forEach(e=>{let r="minibus"===e.busType?s.minibus.depreciationCost:"solo"===e.busType?s.solo.depreciationCost:"articulated"===e.busType?s.articulated.depreciationCost:0;if(e.routeNo){let s=t.find(t=>t.routeNo===e.routeNo);if(s)a+=r*s.routeLengthAtoB;else{let e=t.reduce((e,t)=>e+t.routeLengthAtoB,0)/t.length;a+=r*e}}else{let e=t.reduce((e,t)=>e+t.routeLengthAtoB,0)/t.length;a+=r*e}}),e.scheduleBA.forEach(e=>{let r="minibus"===e.busType?s.minibus.depreciationCost:"solo"===e.busType?s.solo.depreciationCost:"articulated"===e.busType?s.articulated.depreciationCost:0;if(e.routeNo){let s=t.find(t=>t.routeNo===e.routeNo);if(s)a+=r*s.routeLengthBtoA;else{let e=t.reduce((e,t)=>e+t.routeLengthBtoA,0)/t.length;a+=r*e}}else{let e=t.reduce((e,t)=>e+t.routeLengthBtoA,0)/t.length;a+=r*e}}),a},es=(e,t,s)=>{let a=0;return e.scheduleAB.forEach(e=>{if(e.routeNo){let r=t.find(t=>t.routeNo===e.routeNo);if(r)a+=s.driverCost*r.routeLengthAtoB;else{let e=t.reduce((e,t)=>e+t.routeLengthAtoB,0)/t.length;a+=s.driverCost*e}}else{let e=t.reduce((e,t)=>e+t.routeLengthAtoB,0)/t.length;a+=s.driverCost*e}}),e.scheduleBA.forEach(e=>{if(e.routeNo){let r=t.find(t=>t.routeNo===e.routeNo);if(r)a+=s.driverCost*r.routeLengthBtoA;else{let e=t.reduce((e,t)=>e+t.routeLengthBtoA,0)/t.length;a+=s.driverCost*e}}else{let e=t.reduce((e,t)=>e+t.routeLengthBtoA,0)/t.length;a+=s.driverCost*e}}),a},ea=(e,t,s)=>{let a=$(e,t,s);return a+ee(e,t,s)+et(e,t,s)+es(e,t,s)},er=(e,t,s)=>{let a=0;t.forEach(t=>{a+=t.routeLengthAtoB*e.scheduleAB.filter(e=>e.routeNo===t.routeNo).length}),t.forEach(t=>{a+=t.routeLengthBtoA*e.scheduleBA.filter(e=>e.routeNo===t.routeNo).length});let r=ea(e,t,s);return a>0?r/a:0};function el(){let{results:e,kpis:t,parameters:s,routes:w,scheduleResults:B,setActiveStep:A}=(0,y.useBusOptimization)(),[T,C]=(0,r.useState)(""),[S,L]=(0,r.useState)({}),[z,_]=(0,r.useState)({key:"routeNo",direction:"asc"}),[E,F]=(0,r.useState)("compact"),[O,R]=(0,r.useState)("scheduleResults"),Z=(0,r.useMemo)(()=>{let t=[...e];if(T){let e=T.toLowerCase();t=t.filter(t=>{let s=t.minibus+t.solo+t.articulated;return t.routeNo.toLowerCase().includes(e)||t.routeName.toLowerCase().includes(e)||t.routeLength.toString().includes(e)||t.minibus.toString().includes(e)||t.solo.toString().includes(e)||t.articulated.toString().includes(e)||s.toString().includes(e)||t.fuelCost.toFixed(2).includes(e)||t.maintenanceCost.toFixed(2).includes(e)||t.depreciationCost.toFixed(2).includes(e)||t.driverCost.toFixed(2).includes(e)||t.totalCost.toFixed(2).includes(e)||t.carbonEmission.toFixed(2).includes(e)||t.peakPassengersAtoB.toString().includes(e)||t.peakPassengersBtoA.toString().includes(e)||(100*t.capacityUtilization).toFixed(2).includes(e)})}return Object.keys(S).length>0&&(t=t.filter(e=>Object.entries(S).every(t=>{let[s,a]=t;if("totalTrips"===s){let t=e.minibus+e.solo+e.articulated;return a.includes(t.toString())}if("peakPassengersAtoB"===s)return a.includes(e.peakPassengersAtoB.toString());if("peakPassengersBtoA"===s)return a.includes(e.peakPassengersBtoA.toString());if("capacityUtilization"===s){let t=(100*e.capacityUtilization).toFixed(2);return a.includes(t)}{if("fuelCost"!==s&&"maintenanceCost"!==s&&"depreciationCost"!==s&&"driverCost"!==s&&"totalCost"!==s&&"carbonEmission"!==s)return a.includes(e[s].toString());let t=e[s].toFixed(2);return a.includes(t)}}))),z.direction&&t.sort((e,t)=>{let s,a;if("totalTrips"===z.key?(s=e.minibus+e.solo+e.articulated,a=t.minibus+t.solo+t.articulated):"peakPassengersAtoB"===z.key?(s=e.peakPassengersAtoB,a=t.peakPassengersAtoB):"peakPassengersBtoA"===z.key?(s=e.peakPassengersBtoA,a=t.peakPassengersBtoA):"capacityUtilization"===z.key?(s=e.capacityUtilization,a=t.capacityUtilization):(s=e[z.key],a=t[z.key]),"number"==typeof s&&"number"==typeof a)return"asc"===z.direction?s-a:a-s;let r=String(s),l=String(a),i=Number(r),o=Number(l);return isNaN(i)||isNaN(o)?"asc"===z.direction?r.localeCompare(l):l.localeCompare(r):"asc"===z.direction?i-o:o-i}),t},[e,T,S,z]);if(0===e.length)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,a.jsx)("h3",{className:"text-xl font-medium mb-3",children:"Hen\xfcz Sonu\xe7 Yok"}),(0,a.jsx)("p",{className:"text-muted-foreground text-center",children:"Sonu\xe7ları g\xf6rmek i\xe7in l\xfctfen \xf6nce Otob\xfcs Tipi ve Sefer \xc7izelgesi optimizasyonlarını \xe7alıştırın."})]});let M=B?Object.values(B.busUtilization).filter(e=>"minibus"===e.busType).length:e.reduce((e,t)=>e+t.minibus,0),D=B?Object.values(B.busUtilization).filter(e=>"solo"===e.busType).length:e.reduce((e,t)=>e+t.solo,0),I=B?Object.values(B.busUtilization).filter(e=>"articulated"===e.busType).length:e.reduce((e,t)=>e+t.articulated,0),P=s.minibus.fleetCount>0?M/s.minibus.fleetCount*100:0,U=s.solo.fleetCount>0?D/s.solo.fleetCount*100:0,H=s.articulated.fleetCount>0?I/s.articulated.fleetCount*100:0;return(0,a.jsx)(N.pn,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Optimizasyon Sonu\xe7ları"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.z,{onClick:()=>{A("scheduleOptimization")},className:"px-4 py-2 transition-all duration-300 hover:bg-gray-100 dark:hover:bg-gray-800",variant:"outline",children:[(0,a.jsx)(i.Z,{className:"mr-2 h-4 w-4"}),"Geri D\xf6n"]}),(0,a.jsxs)(l.z,{onClick:()=>{if(0===e.length)return;let t=[["Hat No","Hat Adı","A→B Uzunluk (km)","B→A Uzunluk (km)","Midib\xfcs","Solo","K\xf6r\xfckl\xfc","Toplam Sefer Sayısı","Yakıt Maliyeti (TL)","Bakım Maliyeti (TL)","Amortisman (TL)","S\xfcr\xfcc\xfc Maliyeti (TL)","Toplam Maliyet (TL)","Karbon Emisyonu (kg)","A→B Yolcu Sayısı","B→A Yolcu Sayısı","Kapasite Kullanımı (%)"]];B&&B.routeSchedules?Object.entries(B.routeSchedules).forEach(e=>{let[a,r]=e,l=w.find(e=>e.routeNo===a);if(!l)return;let i={minibus:0,solo:0,articulated:0},o=new Set;[...r.scheduleAB,...r.scheduleBA].forEach(e=>{o.add(e.busId)}),Array.from(o).forEach(e=>{let t=B.busUtilization[e];t&&i[t.busType]++});let n=r.scheduleAB.length,d=r.scheduleBA.length,c=0;r.scheduleAB.forEach(e=>{"minibus"===e.busType?c+=s.minibus.fuelCost*l.routeLengthAtoB:"solo"===e.busType?c+=s.solo.fuelCost*l.routeLengthAtoB:"articulated"===e.busType&&(c+=s.articulated.fuelCost*l.routeLengthAtoB)}),r.scheduleBA.forEach(e=>{"minibus"===e.busType?c+=s.minibus.fuelCost*l.routeLengthBtoA:"solo"===e.busType?c+=s.solo.fuelCost*l.routeLengthBtoA:"articulated"===e.busType&&(c+=s.articulated.fuelCost*l.routeLengthBtoA)});let u=0;r.scheduleAB.forEach(e=>{"minibus"===e.busType?u+=s.minibus.maintenanceCost*l.routeLengthAtoB:"solo"===e.busType?u+=s.solo.maintenanceCost*l.routeLengthAtoB:"articulated"===e.busType&&(u+=s.articulated.maintenanceCost*l.routeLengthAtoB)}),r.scheduleBA.forEach(e=>{"minibus"===e.busType?u+=s.minibus.maintenanceCost*l.routeLengthBtoA:"solo"===e.busType?u+=s.solo.maintenanceCost*l.routeLengthBtoA:"articulated"===e.busType&&(u+=s.articulated.maintenanceCost*l.routeLengthBtoA)});let m=0;r.scheduleAB.forEach(e=>{"minibus"===e.busType?m+=s.minibus.depreciationCost*l.routeLengthAtoB:"solo"===e.busType?m+=s.solo.depreciationCost*l.routeLengthAtoB:"articulated"===e.busType&&(m+=s.articulated.depreciationCost*l.routeLengthAtoB)}),r.scheduleBA.forEach(e=>{"minibus"===e.busType?m+=s.minibus.depreciationCost*l.routeLengthBtoA:"solo"===e.busType?m+=s.solo.depreciationCost*l.routeLengthBtoA:"articulated"===e.busType&&(m+=s.articulated.depreciationCost*l.routeLengthBtoA)});let x=s.driverCost*(n*l.routeLengthAtoB+d*l.routeLengthBtoA),h=c+u+m+x,b=0;r.scheduleAB.forEach(e=>{"minibus"===e.busType?b+=s.minibus.carbonEmission*l.routeLengthAtoB:"solo"===e.busType?b+=s.solo.carbonEmission*l.routeLengthAtoB:"articulated"===e.busType&&(b+=s.articulated.carbonEmission*l.routeLengthAtoB)}),r.scheduleBA.forEach(e=>{"minibus"===e.busType?b+=s.minibus.carbonEmission*l.routeLengthBtoA:"solo"===e.busType?b+=s.solo.carbonEmission*l.routeLengthBtoA:"articulated"===e.busType&&(b+=s.articulated.carbonEmission*l.routeLengthBtoA)});let g=r.scheduleAB.reduce((e,t)=>"minibus"===t.busType?e+s.minibus.capacity:"solo"===t.busType?e+s.solo.capacity:"articulated"===t.busType?e+s.articulated.capacity:e,0)+r.scheduleBA.reduce((e,t)=>"minibus"===t.busType?e+s.minibus.capacity:"solo"===t.busType?e+s.solo.capacity:"articulated"===t.busType?e+s.articulated.capacity:e,0),p=l.peakPassengersAtoB+l.peakPassengersBtoA;t.push([a,l.routeName,l.routeLengthAtoB,l.routeLengthBtoA,i.minibus,i.solo,i.articulated,n+d,c,u,m,x,h,b,l.peakPassengersAtoB,l.peakPassengersBtoA,g>0?p/g*100:0])}):Z.forEach(e=>{let s=w.find(t=>t.routeNo===e.routeNo),a=e.minibus+e.solo+e.articulated;t.push([e.routeNo,e.routeName,s?s.routeLengthAtoB:0,s?s.routeLengthBtoA:0,e.minibus,e.solo,e.articulated,a,e.fuelCost,e.maintenanceCost,e.depreciationCost,e.driverCost,e.totalCost,e.carbonEmission,e.peakPassengersAtoB,e.peakPassengersBtoA,100*e.capacityUtilization])});try{let e=j.P6.book_new(),s=j.P6.aoa_to_sheet(t);if(j.P6.book_append_sheet(e,s,"Otob\xfcs Optimizasyon"),B){let t={ab:[["Sefer","Saat","Hat","Otob\xfcs","Tip"]].concat(B.scheduleAB.map((e,t)=>[t+1,e.time,e.routeNo?"Hat ".concat(e.routeNo):"-",e.busId,"minibus"===e.busType?"Midib\xfcs":"solo"===e.busType?"Solo":"K\xf6r\xfckl\xfc"])),ba:[["Sefer","Saat","Hat","Otob\xfcs","Tip"]].concat(B.scheduleBA.map((e,t)=>[t+1,e.time,e.routeNo?"Hat ".concat(e.routeNo):"-",e.busId,"minibus"===e.busType?"Midib\xfcs":"solo"===e.busType?"Solo":"K\xf6r\xfckl\xfc"])),routes:Object.entries(B.routeSchedules).reduce((e,t)=>{let[s,a]=t;return e["Hat ".concat(s)]=[["Sefer","Saat","Y\xf6n","Otob\xfcs","Tip"]].concat([...a.scheduleAB.map(e=>({...e,direction:"A→B"})),...a.scheduleBA.map(e=>({...e,direction:"B→A"}))].map((e,t)=>[t+1,e.time,e.direction,e.busId,"minibus"===e.busType?"Midib\xfcs":"solo"===e.busType?"Solo":"K\xf6r\xfckl\xfc"])),e},{})},s=j.P6.aoa_to_sheet(t.ab),a=j.P6.aoa_to_sheet(t.ba);j.P6.book_append_sheet(e,s,"A→B Sefer \xc7izelgesi"),j.P6.book_append_sheet(e,a,"B→A Sefer \xc7izelgesi"),t.routes&&Object.entries(t.routes).forEach(t=>{let[s,a]=t,r=j.P6.aoa_to_sheet(a);j.P6.book_append_sheet(e,r,s)})}let a=j.cW(e,{bookType:"xlsx",type:"binary"}),r=new ArrayBuffer(a.length),l=new Uint8Array(r);for(let e=0;e<a.length;e++)l[e]=255&a.charCodeAt(e);let i=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=URL.createObjectURL(i),n=document.createElement("a");n.href=o,n.download="otob\xfcs_optimizasyon_sonu\xe7ları.xlsx",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(o)}catch(e){console.error("Excel export failed:",e),alert("Excel dışa aktarma işlemi başarısız oldu. L\xfctfen tekrar deneyin.")}},className:"flex items-center gap-2 bg-gradient-to-r from-teal-500 to-blue-500 hover:from-teal-600 hover:to-blue-600 transition-all duration-300 shadow-md hover:shadow-lg h-9 px-4 rounded-md",children:[(0,a.jsx)(o.Z,{size:16}),"Excel'e Aktar"]})]})]}),(0,a.jsxs)(v.mQ,{defaultValue:"scheduleResults",className:"w-full space-y-4",children:[(0,a.jsxs)(v.dr,{className:"grid w-full grid-cols-2 mb-6 custom-tabs",children:[(0,a.jsxs)(v.SP,{value:"busOptimization",className:"custom-tab",onClick:()=>R("busOptimization"),children:[(0,a.jsx)(n.Z,{className:"mr-2 h-4 w-4"}),"Otob\xfcs Optimizasyonu"]}),(0,a.jsxs)(v.SP,{value:"scheduleResults",className:"custom-tab",onClick:()=>R("scheduleResults"),children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Sefer \xc7izelgeleri"]})]}),(0,a.jsx)(v.nU,{value:"busOptimization",children:t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden shadow-md bg-white dark:bg-gray-950 relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] dark:bg-[radial-gradient(#1f2937_1px,transparent_1px)] [background-size:16px_16px] opacity-30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-5 z-10",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2 mb-4 text-blue-700 dark:text-blue-400",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5"}),"Genel Performans G\xf6stergeleri"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[(0,a.jsxs)(N.u,{children:[(0,a.jsx)(N.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-blue-400/10 to-gray-400/20 p-[1px] shadow-md transition-transform hover:scale-102 cursor-help",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-1.5 rounded-full",children:(0,a.jsx)(u.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Optimizasyon S\xfcresi"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:[t.optimizationTime.toFixed(3)," saniye"]})]})})}),(0,a.jsx)(N._v,{side:"bottom",className:"p-2 text-xs",children:(0,a.jsx)("p",{children:"Optimizasyon algoritmasının \xe7alışma s\xfcresi"})})]}),(0,a.jsxs)(N.u,{children:[(0,a.jsx)(N.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-blue-400/10 to-gray-400/20 p-[1px] shadow-md transition-transform hover:scale-102 cursor-help",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-1.5 rounded-full",children:(0,a.jsx)(m.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Optimize Edilen Hat"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:[e.length," hat"]})]})})}),(0,a.jsx)(N._v,{side:"bottom",className:"p-2 text-xs",children:(0,a.jsx)("p",{children:"Optimizasyon yapılan toplam hat sayısı"})})]}),(0,a.jsxs)(N.u,{children:[(0,a.jsx)(N.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-blue-400/10 to-gray-400/20 p-[1px] shadow-md transition-transform hover:scale-102 cursor-help",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-1.5 rounded-full",children:(0,a.jsx)(x.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Taşınan Yolcu"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:[q(w).toLocaleString("tr-TR")," kişi"]})]})})}),(0,a.jsx)(N._v,{side:"bottom",className:"p-2 text-xs",children:(0,a.jsx)("p",{children:"T\xfcm hatlarda taşınan toplam yolcu sayısı"})})]}),(0,a.jsxs)(N.u,{children:[(0,a.jsx)(N.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-blue-400/10 to-gray-400/20 p-[1px] shadow-md transition-transform hover:scale-102 cursor-help",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-1.5 rounded-full",children:(0,a.jsx)(h.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Kapasite Kullanım Y\xfczdesi"})]}),B?(()=>{let e=B.scheduleAB.reduce((e,t)=>"minibus"===t.busType?e+s.minibus.capacity:"solo"===t.busType?e+s.solo.capacity:"articulated"===t.busType?e+s.articulated.capacity:e,0)+B.scheduleBA.reduce((e,t)=>"minibus"===t.busType?e+s.minibus.capacity:"solo"===t.busType?e+s.solo.capacity:"articulated"===t.busType?e+s.articulated.capacity:e,0),t=q(w);return(0,a.jsxs)("div",{className:"text-xl font-bold",children:[(e>0?t/e*100:0).toFixed(2),"%"]})})():(()=>{let t=e.reduce((e,t)=>e+(t.minibus*s.minibus.capacity+t.solo*s.solo.capacity+t.articulated*s.articulated.capacity),0),r=q(w);return(0,a.jsxs)("div",{className:"text-xl font-bold",children:[(t>0?r/t*100:0).toFixed(2),"%"]})})()]})})}),(0,a.jsx)(N._v,{side:"bottom",className:"p-2 text-xs",children:(0,a.jsx)("p",{children:"Taşınan yolcu sayısının atama sonucunda sunulan kapasiteye oranı"})})]}),(0,a.jsxs)(N.u,{children:[(0,a.jsx)(N.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-blue-400/10 to-gray-400/20 p-[1px] shadow-md transition-transform hover:scale-102 cursor-help",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-1.5 rounded-full",children:(0,a.jsx)(m.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Kat Edilen Kilometre"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:[B?X(B,w).toLocaleString("tr-TR"):t.totalDistance.toLocaleString("tr-TR")," ","km"]})]})})}),(0,a.jsx)(N._v,{side:"bottom",className:"p-2 text-xs",children:(0,a.jsx)("p",{children:"T\xfcm otob\xfcslerin kat ettiği toplam mesafe"})})]})]})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden shadow-md bg-white dark:bg-gray-950 relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(45deg,transparent_25%,rgba(68,64,60,0.05)_25%,rgba(68,64,60,0.05)_50%,transparent_50%,transparent_75%,rgba(68,64,60,0.05)_75%)] dark:bg-[linear-gradient(45deg,transparent_25%,rgba(255,255,255,0.03)_25%,rgba(255,255,255,0.03)_50%,transparent_50%,transparent_75%,rgba(255,255,255,0.03)_75%)] [background-size:20px_20px] opacity-30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-5 z-10",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2 mb-3 text-purple-700 dark:text-purple-400",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5"}),"Filo Kullanımı"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("div",{className:"bg-teal-100 dark:bg-teal-900/30 p-1.5 rounded-full",children:(0,a.jsx)(n.Z,{className:"h-4 w-4 text-teal-600 dark:text-teal-400"})}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Midib\xfcs"})]}),(0,a.jsxs)("div",{className:"text-sm font-medium",children:[M,"/",s.minibus.fleetCount," (",P.toFixed(1),"%)"]}),(0,a.jsx)("div",{className:"w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-teal-500 rounded-full transition-all duration-500 ease-in-out",style:{width:"".concat(Math.min(P,100),"%")}})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-1.5 rounded-full",children:(0,a.jsx)(b.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Solo"})]}),(0,a.jsxs)("div",{className:"text-sm font-medium",children:[D,"/",s.solo.fleetCount," (",U.toFixed(1),"%)"]}),(0,a.jsx)("div",{className:"w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500 ease-in-out",style:{width:"".concat(Math.min(U,100),"%")}})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("div",{className:"bg-purple-100 dark:bg-purple-900/30 p-1.5 rounded-full",children:(0,a.jsx)(n.Z,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"K\xf6r\xfckl\xfc"})]}),(0,a.jsxs)("div",{className:"text-sm font-medium",children:[I,"/",s.articulated.fleetCount," (",H.toFixed(1),"%)"]}),(0,a.jsx)("div",{className:"w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-purple-500 rounded-full transition-all duration-500 ease-in-out",style:{width:"".concat(Math.min(H,100),"%")}})})]})]}),(0,a.jsxs)("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-800 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 p-1.5 rounded-full",children:(0,a.jsx)(n.Z,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Toplam Atanan Ara\xe7 Sayısı"})]}),(0,a.jsxs)("div",{className:"text-sm font-medium",children:[M+D+I,"/",s.minibus.fleetCount+s.solo.fleetCount+s.articulated.fleetCount," ","(",((M+D+I)/(s.minibus.fleetCount+s.solo.fleetCount+s.articulated.fleetCount)*100).toFixed(1),"%)"]}),(0,a.jsx)("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-teal-500 via-blue-500 to-purple-500 rounded-full",style:{width:"".concat(Math.min((M+D+I)/(s.minibus.fleetCount+s.solo.fleetCount+s.articulated.fleetCount)*100,100),"%")}})})]})]})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden shadow-md bg-white dark:bg-gray-950 relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-[repeating-linear-gradient(45deg,transparent,transparent_10px,rgba(68,64,60,0.05)_10px,rgba(68,64,60,0.05)_20px)] dark:bg-[repeating-linear-gradient(45deg,transparent,transparent_10px,rgba(255,255,255,0.03)_10px,rgba(255,255,255,0.03)_20px)] opacity-30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-5 z-10",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2 mb-3 text-red-700 dark:text-red-400",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5"}),"Maliyet G\xf6stergeleri"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)(N.u,{children:[(0,a.jsx)(N.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-red-400/10 to-gray-400/20 p-[1px] shadow-md transition-transform hover:scale-102 cursor-help",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 p-1.5 rounded-full",children:(0,a.jsx)(p.Z,{className:"h-4 w-4 text-red-600 dark:text-red-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Kilometre başına maliyet"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:["₺",B?er(B,w,s).toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2}):t.costPerKm.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})}),(0,a.jsx)(N._v,{side:"bottom",className:"p-2 text-xs",children:(0,a.jsx)("p",{children:"Her bir kilometrelik mesafe i\xe7in ortalama maliyet"})})]}),(0,a.jsxs)(N.u,{children:[(0,a.jsx)(N.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-red-400/10 to-gray-400/20 p-[1px] shadow-md transition-transform hover:scale-102 cursor-help",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 p-1.5 rounded-full",children:(0,a.jsx)(g.Z,{className:"h-4 w-4 text-red-600 dark:text-red-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Toplam yakıt maliyeti"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:["₺",B?$(B,w,s).toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2}):t.totalFuelCost.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})}),(0,a.jsx)(N._v,{side:"bottom",className:"p-2 text-xs",children:(0,a.jsx)("p",{children:"T\xfcm hatlardaki otob\xfcslerin t\xfckettiği toplam yakıt maliyeti"})})]}),(0,a.jsxs)(N.u,{children:[(0,a.jsx)(N.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-red-400/10 to-gray-400/20 p-[1px] shadow-md transition-transform hover:scale-102 cursor-help",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 p-1.5 rounded-full",children:(0,a.jsx)(g.Z,{className:"h-4 w-4 text-red-600 dark:text-red-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Toplam bakım maliyeti"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:["₺",B?ee(B,w,s).toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2}):t.totalMaintenanceCost.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})}),(0,a.jsx)(N._v,{side:"bottom",className:"p-2 text-xs",children:(0,a.jsx)("p",{children:"T\xfcm hatlardaki otob\xfcslerin toplam bakım maliyeti"})})]}),(0,a.jsxs)(N.u,{children:[(0,a.jsx)(N.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-red-400/10 to-gray-400/20 p-[1px] shadow-md transition-transform hover:scale-102 cursor-help",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 p-1.5 rounded-full",children:(0,a.jsx)(g.Z,{className:"h-4 w-4 text-red-600 dark:text-red-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Toplam personel maliyeti"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:["₺",B?es(B,w,s).toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2}):t.totalDriverCost.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})}),(0,a.jsx)(N._v,{side:"bottom",className:"p-2 text-xs",children:(0,a.jsx)("p",{children:"T\xfcm hatlardaki otob\xfcs s\xfcr\xfcc\xfclerinin toplam maliyeti"})})]}),(0,a.jsxs)(N.u,{children:[(0,a.jsx)(N.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-red-400/10 to-gray-400/20 p-[1px] shadow-md transition-transform hover:scale-102 cursor-help",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 p-1.5 rounded-full",children:(0,a.jsx)(g.Z,{className:"h-4 w-4 text-red-600 dark:text-red-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Toplam amortisman maliyeti"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:["₺",B?et(B,w,s).toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2}):t.totalDepreciationCost.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})}),(0,a.jsx)(N._v,{side:"bottom",className:"p-2 text-xs",children:(0,a.jsx)("p",{children:"T\xfcm hatlardaki otob\xfcslerin toplam amortisman maliyeti"})})]}),(0,a.jsxs)(N.u,{children:[(0,a.jsx)(N.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-red-400/10 to-gray-400/20 p-[1px] shadow-md transition-transform hover:scale-102 cursor-help",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 p-1.5 rounded-full",children:(0,a.jsx)(g.Z,{className:"h-4 w-4 text-red-600 dark:text-red-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Toplam maliyet"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:["₺",B?ea(B,w,s).toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2}):t.totalCost.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})}),(0,a.jsx)(N._v,{side:"bottom",className:"p-2 text-xs",children:(0,a.jsx)("p",{children:"T\xfcm hatlardaki otob\xfcslerin toplam maliyeti"})})]})]})]})]})]})}),(0,a.jsx)(v.nU,{value:"scheduleResults",children:B?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden shadow-md bg-white dark:bg-gray-950 relative mb-4",children:(0,a.jsxs)("div",{className:"relative p-5 z-10",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2 mb-3 text-blue-700 dark:text-blue-400",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5"}),"Sefer \xc7izelgesi \xd6zeti"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-blue-400/10 to-gray-400/20 p-[1px] shadow-md",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-1.5 rounded-full",children:(0,a.jsx)(d.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Toplam Sefer Sayısı"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:[B.scheduleAB.length+B.scheduleBA.length," sefer"]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["A→B: ",B.scheduleAB.length," | B→A: ",B.scheduleBA.length]})]})}),(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-teal-400/10 to-gray-400/20 p-[1px] shadow-md",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-teal-100 dark:bg-teal-900/30 p-1.5 rounded-full",children:(0,a.jsx)(n.Z,{className:"h-4 w-4 text-teal-600 dark:text-teal-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Midib\xfcs Sayısı"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:[Object.values(B.busUtilization).filter(e=>"minibus"===e.busType).length," ","adet"]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Toplam Sefer:"," ",Object.values(B.busUtilization).filter(e=>"minibus"===e.busType).reduce((e,t)=>e+t.trips,0)]})]})}),(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-blue-400/10 to-gray-400/20 p-[1px] shadow-md",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-1.5 rounded-full",children:(0,a.jsx)(b.Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Solo Otob\xfcs Sayısı"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:[Object.values(B.busUtilization).filter(e=>"solo"===e.busType).length," ","adet"]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Toplam Sefer:"," ",Object.values(B.busUtilization).filter(e=>"solo"===e.busType).reduce((e,t)=>e+t.trips,0)]})]})}),(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-purple-400/10 to-gray-400/20 p-[1px] shadow-md",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-purple-100 dark:bg-purple-900/30 p-1.5 rounded-full",children:(0,a.jsx)(n.Z,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"K\xf6r\xfckl\xfc Otob\xfcs Sayısı"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:[Object.values(B.busUtilization).filter(e=>"articulated"===e.busType).length," ","adet"]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Toplam Sefer:"," ",Object.values(B.busUtilization).filter(e=>"articulated"===e.busType).reduce((e,t)=>e+t.trips,0)]})]})}),(0,a.jsx)("div",{className:"rounded-lg bg-gradient-to-br from-gray-400/20 via-indigo-400/10 to-gray-400/20 p-[1px] shadow-md",children:(0,a.jsxs)("div",{className:"rounded-lg bg-white/90 dark:bg-black/90 backdrop-blur-md p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 p-1.5 rounded-full",children:(0,a.jsx)(m.Z,{className:"h-4 w-4 text-indigo-600 dark:text-indigo-400"})}),(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Maksimum Interlining"})]}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:[s.maxInterlining||1," hat/otob\xfcs"]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Her otob\xfcs en fazla ",s.maxInterlining||1," farklı hatta \xe7alışabilir"]})]})})]})]})}),(0,a.jsx)("div",{className:"rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden shadow-md bg-white dark:bg-gray-950 relative mb-4",children:(0,a.jsxs)("div",{className:"relative p-5 z-10",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2 mb-3 text-blue-700 dark:text-blue-400",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5"}),"Otob\xfcs Zaman \xc7izelgesi"]}),(0,a.jsx)(V,{scheduleResults:B,routes:w||[]})]})}),(0,a.jsx)("div",{className:"rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden shadow-md bg-white dark:bg-gray-950 relative mb-4",children:(0,a.jsxs)("div",{className:"relative p-5 z-10",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2 mb-3 text-blue-700 dark:text-blue-400",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5"}),"Hat Seferleri Zaman \xc7izelgesi"]}),(0,a.jsx)(W,{scheduleResults:B,routes:w||[]})]})}),B.routeSchedules&&Object.keys(B.routeSchedules).length>0&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)(v.mQ,{defaultValue:"all",className:"w-full",children:[(0,a.jsxs)(v.dr,{className:"mb-4 flex flex-wrap",children:[(0,a.jsx)(v.SP,{value:"all",className:"mr-2 mb-2",children:"T\xfcm Hatlar"}),Object.keys(B.routeSchedules).map(e=>(0,a.jsxs)(v.SP,{value:e,className:"mr-2 mb-2",children:["Hat ",e]},e))]}),(0,a.jsx)(v.nU,{value:"all",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-base font-medium mb-3 flex items-center text-blue-600 dark:text-blue-400 p-2 rounded-md bg-blue-50 dark:bg-blue-900/20",children:[(0,a.jsx)(f.Z,{className:"mr-2 h-4 w-4 text-blue-500"}),"A → B Saat Planı"]}),(0,a.jsx)("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 h-[500px] overflow-y-auto",children:(0,a.jsxs)(k.iA,{children:[(0,a.jsx)(k.xD,{className:"bg-gray-50/90 dark:bg-gray-900/90 sticky top-0 z-10",children:(0,a.jsxs)(k.SC,{children:[(0,a.jsx)(k.ss,{className:"font-medium",children:"Sefer"}),(0,a.jsx)(k.ss,{className:"font-medium",children:"Saat"}),(0,a.jsx)(k.ss,{className:"font-medium",children:"Hat"}),(0,a.jsx)(k.ss,{className:"font-medium",children:"Otob\xfcs"}),(0,a.jsx)(k.ss,{className:"font-medium",children:"Tip"})]})}),(0,a.jsx)(k.RM,{children:B.scheduleAB.map((e,t)=>(0,a.jsxs)(k.SC,{className:"".concat(t%2==0?"bg-gray-50/50 dark:bg-gray-900/50":""," table-row-hover"),children:[(0,a.jsx)(k.pj,{className:"py-2 font-medium",children:t+1}),(0,a.jsxs)(k.pj,{className:"py-2 flex items-center",children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4 text-blue-500"}),e.time]}),(0,a.jsx)(k.pj,{className:"py-2",children:e.routeNo?"Hat ".concat(e.routeNo):"-"}),(0,a.jsx)(k.pj,{className:"py-2",children:e.busId}),(0,a.jsx)(k.pj,{className:"py-2",children:"minibus"===e.busType?"Midib\xfcs":"solo"===e.busType?"Solo":"K\xf6r\xfckl\xfc"})]},t))})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-base font-medium mb-3 flex items-center text-blue-600 dark:text-blue-400 p-2 rounded-md bg-blue-50 dark:bg-blue-900/20",children:[(0,a.jsx)(f.Z,{className:"mr-2 h-4 w-4 rotate-180 text-blue-500"}),"B → A Saat Planı"]}),(0,a.jsx)("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 h-[500px] overflow-y-auto",children:(0,a.jsxs)(k.iA,{children:[(0,a.jsx)(k.xD,{className:"bg-gray-50/90 dark:bg-gray-900/90 sticky top-0 z-10",children:(0,a.jsxs)(k.SC,{children:[(0,a.jsx)(k.ss,{className:"font-medium",children:"Sefer"}),(0,a.jsx)(k.ss,{className:"font-medium",children:"Saat"}),(0,a.jsx)(k.ss,{className:"font-medium",children:"Hat"}),(0,a.jsx)(k.ss,{className:"font-medium",children:"Otob\xfcs"}),(0,a.jsx)(k.ss,{className:"font-medium",children:"Tip"})]})}),(0,a.jsx)(k.RM,{children:B.scheduleBA.map((e,t)=>(0,a.jsxs)(k.SC,{className:"".concat(t%2==0?"bg-gray-50/50 dark:bg-gray-900/50":""," table-row-hover"),children:[(0,a.jsx)(k.pj,{className:"py-2 font-medium",children:t+1}),(0,a.jsxs)(k.pj,{className:"py-2 flex items-center",children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4 text-blue-500"}),e.time]}),(0,a.jsx)(k.pj,{className:"py-2",children:e.routeNo?"Hat ".concat(e.routeNo):"-"}),(0,a.jsx)(k.pj,{className:"py-2",children:e.busId}),(0,a.jsx)(k.pj,{className:"py-2",children:"minibus"===e.busType?"Midib\xfcs":"solo"===e.busType?"Solo":"K\xf6r\xfckl\xfc"})]},t))})]})})]})]})}),Object.keys(B.routeSchedules).map(e=>(0,a.jsx)(v.nU,{value:e,children:(0,a.jsxs)("p",{children:["Hat ",e," i\xe7in i\xe7erik"]})},e))]})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,a.jsx)("h3",{className:"text-xl font-medium mb-3",children:"Sefer \xc7izelgesi Sonucu Yok"}),(0,a.jsx)("p",{className:"text-muted-foreground text-center",children:"Sefer \xe7izelgesi sonu\xe7larını g\xf6rmek i\xe7in l\xfctfen \xf6nce Sefer \xc7izelgesi optimizasyonunu \xe7alıştırın."})]})})]}),B&&(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Hat Bazlı Sonu\xe7lar"}),(0,a.jsx)("div",{className:"overflow-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 rounded-md overflow-hidden",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Hat No"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"A→B Uzunluk (km)"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"B→A Uzunluk (km)"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Midib\xfcs"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Solo"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"K\xf6r\xfckl\xfc"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"A→B Sefer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"B→A Sefer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Yakıt Maliyeti (TL)"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Bakım Maliyeti (TL)"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Amortisman (TL)"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"S\xfcr\xfcc\xfc Maliyeti (TL)"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:"Toplam Maliyet (TL)"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-900 dark:divide-gray-700",children:Object.entries(B.routeSchedules||{}).map(t=>{let[r,l]=t,i=w.find(e=>e.routeNo===r);if(!i)return null;let o={minibus:0,solo:0,articulated:0},n=new Set;[...l.scheduleAB,...l.scheduleBA].forEach(e=>{n.add(e.busId)}),Array.from(n).forEach(e=>{let t=B.busUtilization[e];t&&o[t.busType]++});let d=l.scheduleAB.length,c=l.scheduleBA.length;e.find(e=>e.routeNo===r);let u=0;l.scheduleAB.forEach(e=>{"minibus"===e.busType?u+=s.minibus.fuelCost*i.routeLengthAtoB:"solo"===e.busType?u+=s.solo.fuelCost*i.routeLengthAtoB:"articulated"===e.busType&&(u+=s.articulated.fuelCost*i.routeLengthAtoB)}),l.scheduleBA.forEach(e=>{"minibus"===e.busType?u+=s.minibus.fuelCost*i.routeLengthBtoA:"solo"===e.busType?u+=s.solo.fuelCost*i.routeLengthBtoA:"articulated"===e.busType&&(u+=s.articulated.fuelCost*i.routeLengthBtoA)});let m=0;l.scheduleAB.forEach(e=>{"minibus"===e.busType?m+=s.minibus.maintenanceCost*i.routeLengthAtoB:"solo"===e.busType?m+=s.solo.maintenanceCost*i.routeLengthAtoB:"articulated"===e.busType&&(m+=s.articulated.maintenanceCost*i.routeLengthAtoB)}),l.scheduleBA.forEach(e=>{"minibus"===e.busType?m+=s.minibus.maintenanceCost*i.routeLengthBtoA:"solo"===e.busType?m+=s.solo.maintenanceCost*i.routeLengthBtoA:"articulated"===e.busType&&(m+=s.articulated.maintenanceCost*i.routeLengthBtoA)});let x=0;l.scheduleAB.forEach(e=>{"minibus"===e.busType?x+=s.minibus.depreciationCost*i.routeLengthAtoB:"solo"===e.busType?x+=s.solo.depreciationCost*i.routeLengthAtoB:"articulated"===e.busType&&(x+=s.articulated.depreciationCost*i.routeLengthAtoB)}),l.scheduleBA.forEach(e=>{"minibus"===e.busType?x+=s.minibus.depreciationCost*i.routeLengthBtoA:"solo"===e.busType?x+=s.solo.depreciationCost*i.routeLengthBtoA:"articulated"===e.busType&&(x+=s.articulated.depreciationCost*i.routeLengthBtoA)});let h=s.driverCost*(d*i.routeLengthAtoB+c*i.routeLengthBtoA),b=u+m+x+h;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100",children:r}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:i.routeLengthAtoB.toFixed(1)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:i.routeLengthBtoA.toFixed(1)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:o.minibus}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:o.solo}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:o.articulated}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:d}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:c}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:["₺",u.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:["₺",m.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:["₺",x.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:["₺",h.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:["₺",b.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},r)})})]})})]})]})})}},4753:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var a=s(8442),r=s(128),l=s(4160),i=s(442),o=s(8914);let n=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:d=!1,...c}=e,u=d?l.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(n({variant:r,size:i,className:s})),ref:t,...c})});d.displayName="Button"},6858:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var a=s(8442),r=s(128),l=s(8914);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},3196:function(e,t,s){"use strict";s.d(t,{_:function(){return d}});var a=s(8442),r=s(128),l=s(8181),i=s(442),o=s(8914);let n=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.f,{ref:t,className:(0,o.cn)(n(),s),...r})});d.displayName=l.f.displayName},626:function(e,t,s){"use strict";s.d(t,{RM:function(){return n},SC:function(){return d},iA:function(){return i},pj:function(){return u},ss:function(){return c},xD:function(){return o}});var a=s(8442),r=s(128),l=s(8914);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",s),...r})})});i.displayName="Table";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",s),...r})});o.displayName="TableHeader";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",s),...r})});n.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});d.displayName="TableRow";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});c.displayName="TableHead";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});u.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption"},440:function(e,t,s){"use strict";s.d(t,{SP:function(){return d},dr:function(){return n},mQ:function(){return o},nU:function(){return c}});var a=s(8442),r=s(128),l=s(1289),i=s(8914);let o=l.fC,n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});n.displayName=l.aV.displayName;let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});d.displayName=l.xz.displayName;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});c.displayName=l.VY.displayName},23:function(e,t,s){"use strict";s.d(t,{_v:function(){return c},aJ:function(){return d},pn:function(){return o},u:function(){return n}});var a=s(8442),r=s(128),l=s(4162),i=s(8914);let o=l.zt,n=l.fC,d=l.xz,c=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...o}=e;return(0,a.jsx)(l.VY,{ref:t,sideOffset:r,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...o})});c.displayName=l.VY.displayName},572:function(e,t,s){"use strict";s.r(t),s.d(t,{BusOptimizationProvider:function(){return d},useBusOptimization:function(){return n}});var a=s(8442),r=s(128);let l={smallBusCapacity:25,smallBusOperatingCost:.8,smallBusCO2Emission:.7,mediumBusCapacity:90,mediumBusOperatingCost:1,mediumBusCO2Emission:1,largeBusCapacity:150,largeBusOperatingCost:1.3,largeBusCO2Emission:1.4,operationalHours:18},i={timeRange:{start:"06:00",end:"23:00"}},o=(0,r.createContext)(void 0);function n(){let e=(0,r.useContext)(o);if(!e)throw Error("useBusOptimization must be used within a BusOptimizationProvider");return e}function d(e){let{children:t}=e,[s,n]=(0,r.useState)([]),[d,c]=(0,r.useState)([]),[u,m]=(0,r.useState)(l),[x,h]=(0,r.useState)([]),[b,g]=(0,r.useState)(i),[p,f]=(0,r.useState)(null),[y,j]=(0,r.useState)(null),[N,v]=(0,r.useState)(!1),[k,w]=(0,r.useState)("busType");return(0,a.jsx)(o.Provider,{value:{routes:s,dailyRoutes:d,busParameters:u,optimizationResults:x,scheduleParameters:b,scheduleResults:p,kpis:y,setRoutes:n,setDailyRoutes:c,setBusParameters:m,setOptimizationResults:h,setScheduleParameters:g,setScheduleResults:f,setKpis:j,isOptimizing:N,setIsOptimizing:v,activeStep:k,setActiveStep:w},children:t})}},8914:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var a=s(734),r=s(1657);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}}]);