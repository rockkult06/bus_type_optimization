(()=>{var e={};e.id=494,e.ids=[494],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},671:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var a=s(9986),r=s(9148),i=s(7050),l=s.n(i),n=s(2274),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["bus-type",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7153)),"D:\\bus_type_opt_cursor\\bus_type_optimization\\app\\bus-type\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8161)),"D:\\bus_type_opt_cursor\\bus_type_optimization\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,3172,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\bus_type_opt_cursor\\bus_type_optimization\\app\\bus-type\\page.tsx"],u="/bus-type/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/bus-type/page",pathname:"/bus-type",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5225:(e,t,s)=>{Promise.resolve().then(s.bind(s,6218))},6218:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(6814),r=s(9760),i=s.n(r),l=s(5971),n=s(2453),o=s(8016),d=s(9360),c=s(9154),u=s(2338);let p=(0,c.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),x=r.forwardRef(({className:e,variant:t,...s},r)=>a.jsx("div",{ref:r,role:"alert",className:(0,u.cn)(p({variant:t}),e),...s}));x.displayName="Alert",r.forwardRef(({className:e,...t},s)=>a.jsx("h5",{ref:s,className:(0,u.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let m=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,u.cn)("text-sm [&_p]:leading-relaxed",e),...t}));m.displayName="AlertDescription";var h=s(7005),j=s(2404);function y(){let{dailyRoutes:e,busParameters:t,setOptimizationResults:s}=(0,l.useBusOptimization)(),[r,n]=i().useState(!1),o=async()=>{if(!e.length){alert("L\xfctfen \xf6nce veri y\xfckleyin.");return}n(!0);try{let a=e.map(e=>{let s=e.hourlyDemands.map(s=>{let a=Math.max(s.passengersAtoB,s.passengersBtoA),r=Math.max(s.travelTimeAtoB,s.travelTimeBtoA),i=[{capacity:t.smallBusCapacity,operatingCost:t.smallBusOperatingCost,co2Emission:t.smallBusCO2Emission},{capacity:t.mediumBusCapacity,operatingCost:t.mediumBusOperatingCost,co2Emission:t.mediumBusCO2Emission},{capacity:t.largeBusCapacity,operatingCost:t.largeBusOperatingCost,co2Emission:t.largeBusCO2Emission}].filter(e=>e.capacity>=a);if(0===i.length)throw Error(`Saat ${s.hour} i\xe7in yeterli kapasitede otob\xfcs bulunamadı.`);let l=i.reduce((e,t)=>e.operatingCost*r<=t.operatingCost*r?e:t),n=Math.ceil(2*r/(60*t.operationalHours));return{hour:s.hour,selectedBusType:l.capacity===t.smallBusCapacity?"small":l.capacity===t.mediumBusCapacity?"medium":"large",requiredBuses:n,totalCost:l.operatingCost*r*n,co2Emission:l.co2Emission*(e.distanceAtoB+e.distanceBtoA)*n,capacityUtilization:a/l.capacity*100}}),a=s.reduce((e,t)=>e+t.totalCost,0),r=s.reduce((e,t)=>e+t.co2Emission,0),i=s.reduce((e,t)=>e+t.capacityUtilization,0)/s.length;return{routeNo:e.routeNo,routeName:e.routeName,hourlyOptimizations:s,totalDailyCost:a,totalDailyCO2:r,averageCapacityUtilization:i}});s(a)}catch(e){alert("Optimizasyon sırasında bir hata oluştu: "+e.message)}finally{n(!1)}};return a.jsx(j.z,{onClick:o,disabled:r||!e.length,className:"w-full",children:r?"Optimizasyon Yapılıyor...":"Optimizasyonu Başlat"})}function g(){let{setDailyRoutes:e}=(0,l.useBusOptimization)(),[t,s]=i().useState(null),r=async t=>{let a=t.target.files?.[0];if(a)try{let t=await a.arrayBuffer(),r=h.ij(t),i=r.Sheets[r.SheetNames[0]],l=h.P6.sheet_to_json(i),n=new Map;l.forEach(e=>{let t=e["Hat No"],s=parseInt(e.Saat),a=e["Y\xf6n"],r=parseInt(e["Yolcu Sayısı"]),i=parseInt(e["Parkur S\xfcresi"]);n.has(t)||n.set(t,{routeNo:t,routeName:e["Hat Adı"]||`Hat ${t}`,distanceAtoB:parseFloat(e["A-B Mesafe"]||"0"),distanceBtoA:parseFloat(e["B-A Mesafe"]||"0"),hourlyDemands:Array(24).fill(null).map((e,t)=>({hour:t,passengersAtoB:0,passengersBtoA:0,travelTimeAtoB:0,travelTimeBtoA:0}))});let l=n.get(t).hourlyDemands[s];"A-B"===a?(l.passengersAtoB=r,l.travelTimeAtoB=i):(l.passengersBtoA=r,l.travelTimeBtoA=i)}),e(Array.from(n.values())),s(null)}catch(e){s("Veri y\xfckleme hatası: "+e.message)}};return(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:"Veri Y\xfckleme"})}),a.jsx(n.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(d.I,{type:"file",accept:".xlsx,.xls",onChange:r,className:"w-full"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Excel dosyası formatı: Hat No, Hat Adı, Saat (0-23), Y\xf6n (A-B/B-A), Yolcu Sayısı, Parkur S\xfcresi (dk), A-B Mesafe, B-A Mesafe"})]}),t&&a.jsx(x,{variant:"destructive",children:a.jsx(m,{children:t})}),a.jsx(y,{})]})})]})}function f(){let{optimizationResults:e}=(0,l.useBusOptimization)();return e?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:"Toplam G\xfcnl\xfck Maliyet"})}),a.jsx(n.aY,{children:(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[e.reduce((e,t)=>e+t.totalCost,0).toFixed(2)," TL"]})})]}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:"Toplam CO2 Emisyonu"})}),a.jsx(n.aY,{children:(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[e.reduce((e,t)=>e+t.carbonEmission,0).toFixed(2)," kg"]})})]}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:"Ortalama Kapasite Kullanımı"})}),a.jsx(n.aY,{children:(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[(e.reduce((e,t)=>e+t.capacityUtilization,0)/e.length).toFixed(1),"%"]})})]})]}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:"Hat \xd6zeti"})}),a.jsx(n.aY,{children:(0,a.jsxs)(o.iA,{children:[a.jsx(o.xD,{children:(0,a.jsxs)(o.SC,{children:[a.jsx(o.ss,{children:"Hat No"}),a.jsx(o.ss,{children:"Hat Adı"}),a.jsx(o.ss,{children:"G\xfcnl\xfck Maliyet"}),a.jsx(o.ss,{children:"CO2 Emisyonu"}),a.jsx(o.ss,{children:"Kapasite Kullanımı"})]})}),a.jsx(o.RM,{children:e.map(e=>(0,a.jsxs)(o.SC,{children:[a.jsx(o.pj,{children:e.routeNo}),a.jsx(o.pj,{children:e.routeName}),(0,a.jsxs)(o.pj,{children:[e.totalCost.toFixed(2)," TL"]}),(0,a.jsxs)(o.pj,{children:[e.carbonEmission.toFixed(2)," kg"]}),(0,a.jsxs)(o.pj,{children:[e.capacityUtilization.toFixed(1),"%"]})]},e.routeNo))})]})})]}),e.map(e=>(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:(0,a.jsxs)(n.ll,{children:["Hat ",e.routeNo," - ",e.routeName," Saatlik Detaylar"]})}),a.jsx(n.aY,{children:(0,a.jsxs)(o.iA,{children:[a.jsx(o.xD,{children:(0,a.jsxs)(o.SC,{children:[a.jsx(o.ss,{children:"Hat Uzunluğu (A-B)"}),a.jsx(o.ss,{children:"Hat Uzunluğu (B-A)"}),a.jsx(o.ss,{children:"K\xfc\xe7\xfck Otob\xfcs"}),a.jsx(o.ss,{children:"Orta Otob\xfcs"}),a.jsx(o.ss,{children:"B\xfcy\xfck Otob\xfcs"}),a.jsx(o.ss,{children:"Toplam Maliyet"}),a.jsx(o.ss,{children:"CO2 Emisyonu"}),a.jsx(o.ss,{children:"Kapasite Kullanımı"})]})}),a.jsx(o.RM,{children:(0,a.jsxs)(o.SC,{children:[(0,a.jsxs)(o.pj,{children:[e.routeLengthAtoB.toFixed(1)," km"]}),(0,a.jsxs)(o.pj,{children:[e.routeLengthBtoA.toFixed(1)," km"]}),a.jsx(o.pj,{children:e.minibus}),a.jsx(o.pj,{children:e.solo}),a.jsx(o.pj,{children:e.articulated}),(0,a.jsxs)(o.pj,{children:[e.totalCost.toFixed(2)," TL"]}),(0,a.jsxs)(o.pj,{children:[e.carbonEmission.toFixed(2)," kg"]}),(0,a.jsxs)(o.pj,{children:[e.capacityUtilization.toFixed(1),"%"]})]})})]})})]},e.routeNo))]}):a.jsx(g,{})}function v(){return a.jsx(l.BusOptimizationProvider,{children:(0,a.jsxs)("div",{className:"container mx-auto py-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Otob\xfcs Tipi Optimizasyonu"}),a.jsx(f,{})]})})}},2453:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>n,SZ:()=>d,Zb:()=>l,aY:()=>c,ll:()=>o});var a=s(6814),r=s(9760),i=s(2338);let l=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));l.displayName="Card";let n=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let o=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},7153:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});let a=(0,s(3611).createProxy)(String.raw`D:\bus_type_opt_cursor\bus_type_optimization\app\bus-type\page.tsx`),{__esModule:r,$$typeof:i}=a,l=a.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[619,5,33],()=>s(671));module.exports=a})();